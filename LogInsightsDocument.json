{"openapi":"3.1.0","info":{"title":"Log Ingest + ServiceBus API","version":"4.0"},"paths":{"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/semantic-search/logs/":{"get":{"summary":"Search Logs","operationId":"search_logs_semantic_search_logs__get","parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string","minLength":1,"description":"Search query string","title":"Query"},"description":"Search query string"},{"name":"top_k","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"description":"Number of top results to return","default":5,"title":"Top K"},"description":"Number of top results to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/send-logs/":{"post":{"summary":"Send Logs Api","description":"Upload a .txt, .json, or .jsonl file and send logs to Azure Log Analytics.\nDeduplication is applied per log_type unless skip_dedup=True.","operationId":"send_logs_api_send_logs__post","parameters":[{"name":"skip_dedup","in":"query","required":false,"schema":{"type":"boolean","description":"Set True to skip deduplication","default":false,"title":"Skip Dedup"},"description":"Set True to skip deduplication"},{"name":"reset_cache","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Reset Cache"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_send_logs_api_send_logs__post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/logs/service/{service_name}":{"get":{"tags":["Logs"],"summary":"Get Logs By Service","description":"Fetch logs for a specific service.","operationId":"get_logs_by_service_logs_service__service_name__get","parameters":[{"name":"service_name","in":"path","required":true,"schema":{"type":"string","title":"Service Name"}},{"name":"top","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Top"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/logs/level/{log_level}":{"get":{"tags":["Logs"],"summary":"Get Logs By Level","description":"Fetch logs filtered by log level (error/warn/info).","operationId":"get_logs_by_level_logs_level__log_level__get","parameters":[{"name":"log_level","in":"path","required":true,"schema":{"type":"string","title":"Log Level"}},{"name":"top","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Top"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/logs/anomalies":{"get":{"tags":["Logs"],"summary":"Get Anomalous Logs","description":"Fetch logs marked as anomalies.","operationId":"get_anomalous_logs_logs_anomalies_get","parameters":[{"name":"top","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Top"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics/service/{service_name}":{"get":{"tags":["Metrics"],"summary":"Get Metrics Service","operationId":"get_metrics_service_metrics_service__service_name__get","parameters":[{"name":"service_name","in":"path","required":true,"schema":{"type":"string","title":"Service Name"}},{"name":"top","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Top"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics/latest":{"get":{"tags":["Metrics"],"summary":"Get Metrics Summary","operationId":"get_metrics_summary_metrics_latest_get","parameters":[{"name":"top","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Top"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics/anomalies":{"get":{"tags":["Metrics"],"summary":"Get Metrics Anomalies","operationId":"get_metrics_anomalies_metrics_anomalies_get","parameters":[{"name":"top","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Top"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics/avg-cpu/{service_name}":{"get":{"tags":["Metrics"],"summary":"Avg Cpu","operationId":"avg_cpu_metrics_avg_cpu__service_name__get","parameters":[{"name":"service_name","in":"path","required":true,"schema":{"type":"string","title":"Service Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics/avg-memory/{service_name}":{"get":{"tags":["Metrics"],"summary":"Avg Memory","operationId":"avg_memory_metrics_avg_memory__service_name__get","parameters":[{"name":"service_name","in":"path","required":true,"schema":{"type":"string","title":"Service Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics/max-latency/{service_name}":{"get":{"tags":["Metrics"],"summary":"Max Latency","operationId":"max_latency_metrics_max_latency__service_name__get","parameters":[{"name":"service_name","in":"path","required":true,"schema":{"type":"string","title":"Service Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics/error-rate/{service_name}":{"get":{"tags":["Metrics"],"summary":"Error Rate","operationId":"error_rate_metrics_error_rate__service_name__get","parameters":[{"name":"service_name","in":"path","required":true,"schema":{"type":"string","title":"Service Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics/top-users/{service_name}":{"get":{"tags":["Metrics"],"summary":"Top Users","operationId":"top_users_metrics_top_users__service_name__get","parameters":[{"name":"service_name","in":"path","required":true,"schema":{"type":"string","title":"Service Name"}},{"name":"top","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"default":5,"title":"Top"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics/component-distribution/{service_name}":{"get":{"tags":["Metrics"],"summary":"Component Distribution","operationId":"component_distribution_metrics_component_distribution__service_name__get","parameters":[{"name":"service_name","in":"path","required":true,"schema":{"type":"string","title":"Service Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/metrics/namespace-distribution/{service_name}":{"get":{"tags":["Metrics"],"summary":"Namespace Distribution","operationId":"namespace_distribution_metrics_namespace_distribution__service_name__get","parameters":[{"name":"service_name","in":"path","required":true,"schema":{"type":"string","title":"Service Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_send_logs_api_send_logs__post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"log_type":{"type":"string","title":"Log Type"},"format":{"type":"string","title":"Format","default":"json"}},"type":"object","required":["file","log_type"],"title":"Body_send_logs_api_send_logs__post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}